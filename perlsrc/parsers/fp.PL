#!/usr/bin/perl -w
#
# Copyright (C) 2010, OMBT LLC and Mike A. Rumore
# All rights reserved.
# Contact: Mike A. Rumore, (mike.a.rumore@gmail.com)
#
#
# summary of messages found in one log file:
# $ fp sun2.log | cut -d' ' -f1 | grep -v TAGID | grep -v '===' | grep -v '^ *$' | sort | uniq -c
# 
# 194087 Account
# 145459 AvgPx
# 243417 BodyLength
# 243417 CheckSum
# 241631 ClOrdID
# 145459 CumQty
#     13 CxlRejReason
#     13 CxlRejResponseTo
#      2 EncryptMethod
# 145459 ExecID
#  48513 ExecInst
# 145459 ExecTransType
# 145459 ExecType
#  48513 HandlInst
#      2 HeartBtInt
# 145459 LastPx
# 145459 LastQty
# 145459 LeavesQty
# 243417 MsgSeqNum
# 243417 MsgType
# 145472 OrderID
# 241618 OrderQty
# 145472 OrdStatus
# 193972 OrdType
# 142832 OrigClOrdID
# 146441 Price
# 243417 SenderCompID
#  96159 SenderSubID
# 243417 SendingTime
# 241618 Side
# 241618 Symbol
# 243417 TargetCompID
# 193985 TargetSubID
#     13 Text
# 146330 TimeInForce
# 193985 TransactTime
# 
# the same type of data for sun3.log
#
#  10023 Account
#   7528 AvgPx
#  14560 BodyLength
#  14560 CheckSum
#  12495 ClOrdID
#   7528 CumQty
#      2 CxlRejReason
#      2 CxlRejResponseTo
#      2 EncryptMethod
#   7528 ExecID
#   2487 ExecInst
#   7528 ExecTransType
#   7528 ExecType
#   2487 HandlInst
#      2 HeartBtInt
#   7528 LastPx
#   7528 LastQty
#   7528 LeavesQty
#  14560 MsgSeqNum
#  14560 MsgType
#   7530 OrderID
#  12493 OrderQty
#   7530 OrdStatus
#  10015 OrdType
#   7428 OrigClOrdID
#   7545 Price
#  14560 SenderCompID
#   4965 SenderSubID
#  14560 SendingTime
#  12493 Side
#  12493 Symbol
#  14560 TargetCompID
#  10017 TargetSubID
#      2 Text
#   7537 TimeInForce
#  10017 TransactTime
#
my %tags = (
	"1" => "Account",
	"2" => "AdvId",
	"3" => "AdvRefID",
	"4" => "AdvSide",
	"5" => "AdvTransType",
	"6" => "AvgPx",
	"7" => "BeginSeqNo",
	"8" => "BeginString",
	"9" => "BodyLength",
	"10" => "CheckSum",
	"11" => "ClOrdID",
	"12" => "Commission",
	"13" => "CommType",
	"14" => "CumQty",
	"15" => "Currency",
	"16" => "EndSeqNo",
	"17" => "ExecID",
	"18" => "ExecInst",
	"19" => "ExecRefID",
	"20" => "ExecTransType",
	"21" => "HandlInst",
	"22" => "SecurityIDSource",
	"23" => "IOIid",
	"24" => "IOIOthSvc",
	"25" => "IOIQltyInd",
	"26" => "IOIRefID",
	"27" => "IOIQty",
	"28" => "IOITransType",
	"29" => "LastCapacity",
	"30" => "LastMkt",
	"31" => "LastPx",
	"32" => "LastQty",
	"33" => "LinesOfText",
	"34" => "MsgSeqNum",
	"35" => "MsgType",
	"36" => "NewSeqNo",
	"37" => "OrderID",
	"38" => "OrderQty",
	"39" => "OrdStatus",
	"40" => "OrdType",
	"41" => "OrigClOrdID",
	"42" => "OrigTime",
	"43" => "PossDupFlag",
	"44" => "Price",
	"45" => "RefSeqNum",
	"46" => "RelatdSym",
	"47" => "Rule80A",
	"48" => "SecurityID",
	"49" => "SenderCompID",
	"50" => "SenderSubID",
	"51" => "SendingDate",
	"52" => "SendingTime",
	"53" => "Quantity",
	"54" => "Side",
	"55" => "Symbol",
	"56" => "TargetCompID",
	"57" => "TargetSubID",
	"58" => "Text",
	"59" => "TimeInForce",
	"60" => "TransactTime",
	"61" => "Urgency",
	"62" => "ValidUntilTime",
	"63" => "SettlmntTyp",
	"64" => "FutSettDate",
	"65" => "SymbolSfx",
	"66" => "ListID",
	"67" => "ListSeqNo",
	"68" => "TotNoOrders",
	"69" => "ListExecInst",
	"70" => "AllocID",
	"71" => "AllocTransType",
	"72" => "RefAllocID",
	"73" => "NoOrders",
	"74" => "AvgPrxPrecision",
	"75" => "TradeDate",
	"76" => "ExecBroker",
	"77" => "PositionEffect",
	"78" => "NoAllocs",
	"79" => "AllocAccount",
	"80" => "AllocQty",
	"81" => "ProcessCode",
	"82" => "NoRpts",
	"83" => "RptSeq",
	"84" => "CxlQty",
	"85" => "NoDlvyInst",
	"86" => "DlvyInst",
	"87" => "AllocStatus",
	"88" => "AllocRejCode",
	"89" => "Signature",
	"90" => "SecureDataLen",
	"91" => "SecureData",
	"92" => "BrokerOfCredit",
	"93" => "SignatureLength",
	"94" => "EmailType",
	"95" => "RawDataLength",
	"96" => "RawData",
	"97" => "PossResend",
	"98" => "EncryptMethod",
	"99" => "StopPx",
	"100" => "ExDestination",
	"102" => "CxlRejReason",
	"103" => "OrdRejReason",
	"104" => "IOIQualifier",
	"105" => "WaveNo",
	"106" => "Issuer",
	"107" => "SecurityDesc",
	"108" => "HeartBtInt",
	"109" => "ClientID",
	"110" => "MinQty",
	"111" => "MaxFloor",
	"112" => "TestReqID",
	"113" => "ReportToExch",
	"114" => "LocateReqd",
	"115" => "OnBehalfOfCompID",
	"116" => "OnBehalfOfSubID",
	"117" => "QuoteID",
	"118" => "NetMoney",
	"119" => "SettlCurrAmt",
	"120" => "SettlCurrency",
	"121" => "ForexReq",
	"122" => "OrigSendingTime",
	"123" => "GapFillFlag",
	"124" => "NoExecs",
	"125" => "CxlType",
	"126" => "ExpireTime",
	"127" => "DKReason",
	"128" => "DeliverToCompID",
	"129" => "DeliverToSubID",
	"130" => "IOINaturalFlag",
	"131" => "QuoteReqID",
	"132" => "BidPx",
	"133" => "OfferPx",
	"134" => "BidSize",
	"135" => "OfferSize",
	"136" => "NoMiscFees",
	"137" => "MiscFeeAmt",
	"138" => "MiscFeeCurr",
	"139" => "MiscFeeType",
	"140" => "PrevClosePx",
	"141" => "ResetSeqNumFlag",
	"142" => "SenderLocationID",
	"143" => "TargetLocationID",
	"144" => "OnBehalfOfLocationID",
	"145" => "DeliverToLocationID",
	"146" => "NoRelatedSym",
	"147" => "Subject",
	"148" => "Headline",
	"149" => "URLLink",
	"150" => "ExecType",
	"151" => "LeavesQty",
	"152" => "CashOrderQty",
	"153" => "AllocAvgPx",
	"154" => "AllocNetMoney",
	"155" => "SettlCurrFxRate",
	"156" => "SettlCurrFxRateCalc",
	"157" => "NumDaysInterest",
	"158" => "AccruedInterestRate",
	"159" => "AccruedInterestAmt",
	"160" => "SettlInstMode",
	"161" => "AllocText",
	"162" => "SettlInstID",
	"163" => "SettlInstTransType",
	"164" => "EmailThreadID",
	"165" => "SettlInstSource",
	"166" => "SettlLocation",
	"167" => "SecurityType",
	"168" => "EffectiveTime",
	"169" => "StandInstDbType",
	"170" => "StandInstDbName",
	"171" => "StandInstDbID",
	"172" => "SettlDeliveryType",
	"173" => "SettlDepositoryCode",
	"174" => "SettlBrkrCode",
	"175" => "SettlInstCode",
	"176" => "SecuritySettlAgentName",
	"177" => "SecuritySettlAgentCode",
	"178" => "SecuritySettlAgentAcctNum",
	"179" => "SecuritySettlAgentAcctName",
	"180" => "SecuritySettlAgentContactName",
	"181" => "SecuritySettlAgentContactPhone",
	"182" => "CashSettlAgentName",
	"183" => "CashSettlAgentCode",
	"184" => "CashSettlAgentAcctNum",
	"185" => "CashSettlAgentAcctName",
	"186" => "CashSettlAgentContactName",
	"187" => "CashSettlAgentContactPhone",
	"188" => "BidSpotRate",
	"189" => "BidForwardPoints",
	"190" => "OfferSpotRate",
	"191" => "OfferForwardPoints",
	"192" => "OrderQty2",
	"193" => "FutSettDate2",
	"194" => "LastSpotRate",
	"195" => "LastForwardPoints",
	"196" => "AllocLinkID",
	"197" => "AllocLinkType",
	"198" => "SecondaryOrderID",
	"199" => "NoIOIQualifiers",
	"200" => "MaturityMonthYear",
	"201" => "PutOrCall",
	"202" => "StrikePrice",
	"203" => "CoveredOrUncovered",
	"204" => "CustomerOrFirm",
	"205" => "MaturityDay",
	"206" => "OptAttribute",
	"207" => "SecurityExchange",
	"208" => "NotifyBrokerOfCredit",
	"209" => "AllocHandlInst",
	"210" => "MaxShow",
	"211" => "PegDifference",
	"212" => "XmlDataLen",
	"213" => "XmlData",
	"214" => "SettlInstRefID",
	"215" => "NoRoutingIDs",
	"216" => "RoutingType",
	"217" => "RoutingID",
	"218" => "Spread",
	"219" => "Benchmark",
	"220" => "BenchmarkCurveCurrency",
	"221" => "BenchmarkCurveName",
	"222" => "BenchmarkCurvePoint",
	"223" => "CouponRate",
	"224" => "CouponPaymentDate",
	"225" => "IssueDate",
	"226" => "RepurchaseTerm",
	"227" => "RepurchaseRate",
	"228" => "Factor",
	"229" => "TradeOriginationDate",
	"230" => "ExDate",
	"231" => "ContractMultiplier",
	"232" => "NoStipulations",
	"233" => "StipulationType",
	"234" => "StipulationValue",
	"235" => "YieldType",
	"236" => "Yield",
	"237" => "TotalTakedown",
	"238" => "Concession",
	"239" => "RepoCollateralSecurityType",
	"240" => "RedemptionDate",
	"241" => "UnderlyingCouponPaymentDate",
	"242" => "UnderlyingIssueDate",
	"243" => "UnderlyingRepoCollateralSecurityType",
	"244" => "UnderlyingRepurchaseTerm",
	"245" => "UnderlyingRepurchaseRate",
	"246" => "UnderlyingFactor",
	"247" => "UnderlyingRedemptionDate",
	"248" => "LegCouponPaymentDate",
	"249" => "LegIssueDate",
	"250" => "LegRepoCollateralSecurityType",
	"251" => "LegRepurchaseTerm",
	"252" => "LegRepurchaseRate",
	"253" => "LegFactor",
	"254" => "LegRedemptionDate",
	"255" => "CreditRating",
	"256" => "UnderlyingCreditRating",
	"257" => "LegCreditRating",
	"258" => "TradedFlatSwitch",
	"259" => "BasisFeatureDate",
	"260" => "BasisFeaturePrice",
	"261" => "Reserved-Allocated to the Fixed Income proposal",
	"262" => "MDReqID",
	"263" => "SubscriptionRequestType",
	"264" => "MarketDepth",
	"265" => "MDUpdateType",
	"266" => "AggregatedBook",
	"267" => "NoMDEntryTypes",
	"268" => "NoMDEntries",
	"269" => "MDEntryType",
	"270" => "MDEntryPx",
	"271" => "MDEntrySize",
	"272" => "MDEntryDate",
	"273" => "MDEntryTime",
	"274" => "TickDirection",
	"275" => "MDMkt",
	"276" => "QuoteCondition",
	"277" => "TradeCondition",
	"278" => "MDEntryID",
	"279" => "MDUpdateAction",
	"280" => "MDEntryRefID",
	"281" => "MDReqRejReason",
	"282" => "MDEntryOriginator",
	"283" => "LocationID",
	"284" => "DeskID",
	"285" => "DeleteReason",
	"286" => "OpenCloseSettleFlag",
	"287" => "SellerDays",
	"288" => "MDEntryBuyer",
	"289" => "MDEntrySeller",
	"290" => "MDEntryPositionNo",
	"291" => "FinancialStatus",
	"292" => "CorporateAction",
	"293" => "DefBidSize",
	"294" => "DefOfferSize",
	"295" => "NoQuoteEntries",
	"296" => "NoQuoteSets",
	"297" => "QuoteStatus",
	"298" => "QuoteCancelType",
	"299" => "QuoteEntryID",
	"300" => "QuoteRejectReason",
	"301" => "QuoteResponseLevel",
	"302" => "QuoteSetID",
	"303" => "QuoteRequestType",
	"304" => "TotQuoteEntries",
	"305" => "UnderlyingSecurityIDSource",
	"306" => "UnderlyingIssuer",
	"307" => "UnderlyingSecurityDesc",
	"308" => "UnderlyingSecurityExchange",
	"309" => "UnderlyingSecurityID",
	"310" => "UnderlyingSecurityType",
	"311" => "UnderlyingSymbol",
	"312" => "UnderlyingSymbolSfx",
	"313" => "UnderlyingMaturityMonthYear",
	"314" => "UnderlyingMaturityDay",
	"315" => "UnderlyingPutOrCall",
	"316" => "UnderlyingStrikePrice",
	"317" => "UnderlyingOptAttribute",
	"318" => "Underlying Currency",
	"319" => "RatioQty",
	"320" => "SecurityReqID",
	"321" => "SecurityRequestType",
	"322" => "SecurityResponseID",
	"323" => "SecurityResponseType",
	"324" => "SecurityStatusReqID",
	"325" => "UnsolicitedIndicator",
	"326" => "SecurityTradingStatus",
	"327" => "HaltReason",
	"328" => "InViewOfCommon",
	"329" => "DueToRelated",
	"330" => "BuyVolume",
	"331" => "SellVolume",
	"332" => "HighPx",
	"333" => "LowPx",
	"334" => "Adjustment",
	"335" => "TradSesReqID",
	"336" => "TradingSessionID",
	"337" => "ContraTrader",
	"338" => "TradSesMethod",
	"339" => "TradSesMode",
	"340" => "TradSesStatus",
	"341" => "TradSesStartTime",
	"342" => "TradSesOpenTime",
	"343" => "TradSesPreCloseTime",
	"344" => "TradSesCloseTime",
	"345" => "TradSesEndTime",
	"346" => "NumberOfOrders",
	"347" => "MessageEncoding",
	"348" => "EncodedIssuerLen",
	"349" => "EncodedIssuer",
	"350" => "EncodedSecurityDescLen",
	"351" => "EncodedSecurityDesc",
	"352" => "EncodedListExecInstLen",
	"353" => "EncodedListExecInst",
	"354" => "EncodedTextLen",
	"355" => "EncodedText",
	"356" => "EncodedSubjectLen",
	"357" => "EncodedSubject",
	"358" => "EncodedHeadlineLen",
	"359" => "EncodedHeadline",
	"360" => "EncodedAllocTextLen",
	"361" => "EncodedAllocText",
	"362" => "EncodedUnderlyingIssuerLen",
	"363" => "EncodedUnderlyingIssuer",
	"364" => "EncodedUnderlyingSecurityDescLen",
	"365" => "EncodedUnderlyingSecurityDesc",
	"366" => "AllocPrice",
	"367" => "QuoteSetValidUntilTime",
	"368" => "QuoteEntryRejectReason",
	"369" => "LastMsgSeqNumProcessed",
	"370" => "OnBehalfOfSendingTime",
	"371" => "RefTagID",
	"372" => "RefMsgType",
	"373" => "SessionRejectReason",
	"374" => "BidRequestTransType",
	"375" => "ContraBroker",
	"376" => "ComplianceID",
	"377" => "SolicitedFlag",
	"378" => "ExecRestatementReason",
	"379" => "BusinessRejectRefID",
	"380" => "BusinessRejectReason",
	"381" => "GrossTradeAmt",
	"382" => "NoContraBrokers",
	"383" => "MaxMessageSize",
	"384" => "NoMsgTypes",
	"385" => "MsgDirection",
	"386" => "NoTradingSessions",
	"387" => "TotalVolumeTraded",
	"388" => "DiscretionInst",
	"389" => "DiscretionOffset",
	"390" => "BidID",
	"391" => "ClientBidID",
	"392" => "ListName",
	"393" => "TotalNumSecurities",
	"394" => "BidType",
	"395" => "NumTickets",
	"396" => "SideValue1",
	"397" => "SideValue2",
	"398" => "NoBidDescriptors",
	"399" => "BidDescriptorType",
	"400" => "BidDescriptor",
	"401" => "SideValueInd",
	"402" => "LiquidityPctLow",
	"403" => "LiquidityPctHigh",
	"404" => "LiquidityValue",
	"405" => "EFPTrackingError",
	"406" => "FairValue",
	"407" => "OutsideIndexPct",
	"408" => "ValueOfFutures",
	"409" => "LiquidityIndType",
	"410" => "WtAverageLiquidity",
	"411" => "ExchangeForPhysical",
	"412" => "OutMainCntryUIndex",
	"413" => "CrossPercent",
	"414" => "ProgRptReqs",
	"415" => "ProgPeriodInterval",
	"416" => "IncTaxInd",
	"417" => "NumBidders",
	"418" => "TradeType",
	"419" => "BasisPxType",
	"420" => "NoBidComponents",
	"421" => "Country",
	"422" => "TotNoStrikes",
	"423" => "PriceType",
	"424" => "DayOrderQty",
	"425" => "DayCumQty",
	"426" => "DayAvgPx",
	"427" => "GTBookingInst",
	"428" => "NoStrikes",
	"429" => "ListStatusType",
	"430" => "NetGrossInd",
	"431" => "ListOrderStatus",
	"432" => "ExpireDate",
	"433" => "ListExecInstType",
	"434" => "CxlRejResponseTo",
	"435" => "UnderlyingCouponRate",
	"436" => "UnderlyingContractMultiplier",
	"437" => "ContraTradeQty",
	"438" => "ContraTradeTime",
	"439" => "ClearingFirm",
	"440" => "ClearingAccount",
	"441" => "LiquidityNumSecurities",
	"442" => "MultiLegReportingType",
	"443" => "StrikeTime",
	"444" => "ListStatusText",
	"445" => "EncodedListStatusTextLen",
	"446" => "EncodedListStatusText",
	"447" => "PartyIDSource",
	"448" => "PartyID",
	"449" => "TotalVolumeTradedDate",
	"450" => "TotalVolumeTraded Time",
	"451" => "NetChgPrevDay",
	"452" => "PartyRole",
	"453" => "NoPartyIDs",
	"454" => "NoSecurityAltID",
	"455" => "SecurityAltID",
	"456" => "SecurityAltIDSource",
	"457" => "NoUnderlyingSecurityAltID",
	"458" => "UnderlyingSecurityAltID",
	"459" => "UnderlyingSecurityAltIDSource",
	"460" => "Product",
	"461" => "CFICode",
	"462" => "UnderlyingProduct",
	"463" => "UnderlyingCFICode",
	"464" => "TestMessageIndicator",
	"465" => "QuantityType",
	"466" => "BookingRefID",
	"467" => "IndividualAllocID",
	"468" => "RoundingDirection",
	"469" => "RoundingModulus",
	"470" => "CountryOfIssue",
	"471" => "StateOrProvinceOfIssue",
	"472" => "LocaleOfIssue",
	"473" => "NoRegistDtls",
	"474" => "MailingDtls",
	"475" => "InvestorCountryOfResidence",
	"476" => "PaymentRef",
	"477" => "DistribPaymentMethod",
	"478" => "CashDistribCurr",
	"479" => "CommCurrency",
	"480" => "CancellationRights",
	"481" => "MoneyLaunderingStatus",
	"482" => "MailingInst",
	"483" => "TransBkdTime",
	"484" => "ExecPriceType",
	"485" => "ExecPriceAdjustment",
	"486" => "DateOfBirth",
	"487" => "TradeReportTransType",
	"488" => "CardHolderName",
	"489" => "CardNumber",
	"490" => "CardExpDate",
	"491" => "CardIssNo",
	"492" => "PaymentMethod",
	"493" => "RegistAcctType",
	"494" => "Designation",
	"495" => "TaxAdvantageType",
	"496" => "RegistRejReasonText",
	"497" => "FundRenewWaiv",
	"498" => "CashDistribAgentName",
	"499" => "CashDistribAgentCode",
	"500" => "CashDistribAgentAcctNumber",
	"501" => "CashDistribPayRef",
	"502" => "CashDistribAgentAcctName",
	"503" => "CardStartDate",
	"504" => "PaymentDate",
	"505" => "PaymentRemitterID",
	"506" => "RegistStatus",
	"507" => "RegistRejReasonCode",
	"508" => "RegistRefID",
	"509" => "RegistDetls",
	"510" => "NoDistribInsts",
	"511" => "RegistEmail",
	"512" => "DistribPercentage",
	"513" => "RegistID",
	"514" => "RegistTransType",
	"515" => "ExecValuationPoint",
	"516" => "OrderPercent",
	"517" => "OwnershipType",
	"518" => "NoContAmts",
	"519" => "ContAmtType",
	"520" => "ContAmtValue",
	"521" => "ContAmtCurr",
	"522" => "OwnerType",
	"523" => "PartySubID",
	"524" => "NestedPartyID",
	"525" => "NestedPartyIDSource",
	"526" => "SecondaryClOrdID",
	"527" => "SecondaryExecID",
	"528" => "OrderCapacity",
	"529" => "OrderRestrictions",
	"530" => "MassCancelRequestType",
	"531" => "MassCancelResponse",
	"532" => "MassCancelRejectReason",
	"533" => "TotalAffectedOrders",
	"534" => "NoAffectedOrders",
	"535" => "AffectedOrderID",
	"536" => "AffectedSecondaryOrderID",
	"537" => "QuoteType",
	"538" => "NestedPartyRole",
	"539" => "NoNestedPartyIDs",
	"540" => "TotalAccruedInterestAmt",
	"541" => "MaturityDate",
	"542" => "UnderlyingMaturityDate",
	"543" => "InstrRegistry",
	"544" => "CashMargin",
	"545" => "NestedPartySubID",
	"546" => "Scope",
	"547" => "MDImplicitDelete",
	"548" => "CrossID",
	"549" => "CrossType",
	"550" => "CrossPrioritization",
	"551" => "OrigCrossID",
	"552" => "NoSides",
	"553" => "Username",
	"554" => "Password",
	"555" => "NoLegs",
	"556" => "LegCurrency",
	"557" => "TotalNumSecurityTypes",
	"558" => "NoSecurityTypes",
	"559" => "SecurityListRequestType",
	"560" => "SecurityRequestResult",
	"561" => "RoundLot",
	"562" => "MinTradeVol",
	"563" => "MultiLegRptTypeReq",
	"564" => "LegPositionEffect",
	"565" => "LegCoveredOrUncovered",
	"566" => "LegPrice",
	"567" => "TradSesStatusRejReason",
	"568" => "TradeRequestID",
	"569" => "TradeRequestType",
	"570" => "PreviouslyReported",
	"571" => "TradeReportID",
	"572" => "TradeReportRefID",
	"573" => "MatchStatus",
	"574" => "MatchType",
	"575" => "OddLot",
	"576" => "NoClearingInstructions",
	"577" => "ClearingInstruction",
	"578" => "TradeInputSource",
	"579" => "TradeInputDevice",
	"580" => "NoDates",
	"581" => "AccountType",
	"582" => "CustOrderCapacity",
	"583" => "ClOrdLinkID",
	"584" => "MassStatusReqID",
	"585" => "MassStatusReqType",
	"586" => "OrigOrdModTime",
	"587" => "LegSettlmntTyp",
	"588" => "LegFutSettDate",
	"589" => "DayBookingInst",
	"590" => "BookingUnit",
	"591" => "PreallocMethod",
	"592" => "UnderlyingCountryOfIssue",
	"593" => "UnderlyingStateOrProvinceOfIssue",
	"594" => "UnderlyingLocaleOfIssue",
	"595" => "UnderlyingInstrRegistry",
	"596" => "LegCountryOfIssue",
	"597" => "LegStateOrProvinceOfIssue",
	"598" => "LegLocaleOfIssue",
	"599" => "LegInstrRegistry",
	"600" => "LegSymbol",
	"601" => "LegSymbolSfx",
	"602" => "LegSecurityID",
	"603" => "LegSecurityIDSource",
	"604" => "NoLegSecurityAltID",
	"605" => "LegSecurityAltID",
	"606" => "LegSecurityAltIDSource",
	"607" => "LegProduct",
	"608" => "LegCFICode",
	"609" => "LegSecurityType",
	"610" => "LegMaturityMonthYear",
	"611" => "LegMaturityDate",
	"612" => "LegStrikePrice",
	"613" => "LegOptAttribute",
	"614" => "LegContractMultiplier",
	"615" => "LegCouponRate",
	"616" => "LegSecurityExchange",
	"617" => "LegIssuer",
	"618" => "EncodedLegIssuerLen",
	"619" => "EncodedLegIssuer",
	"620" => "LegSecurityDesc",
	"621" => "EncodedLegSecurityDescLen",
	"622" => "EncodedLegSecurityDesc",
	"623" => "LegRatioQty",
	"624" => "LegSide",
	"625" => "TradingSessionSubID",
	"626" => "AllocType",
	"627" => "NoHops",
	"628" => "HopCompID",
	"629" => "HopSendingTime",
	"630" => "HopRefID",
	"631" => "MidPx",
	"632" => "BidYield",
	"633" => "MidYield",
	"634" => "OfferYield",
	"635" => "ClearingFeeIndicator",
	"636" => "WorkingIndicator",
	"637" => "LegLastPx",
	"638" => "PriorityIndicator",
	"639" => "PriceImprovement",
	"640" => "Price2",
	"641" => "LastForwardPoints2",
	"642" => "BidForwardPoints2",
	"643" => "OfferForwardPoints2",
	"644" => "RFQReqID",
	"645" => "MktBidPx",
	"646" => "MktOfferPx",
	"647" => "MinBidSize",
	"648" => "MinOfferSize",
	"649" => "QuoteStatusReqID",
	"650" => "LegalConfirm",
	"651" => "UnderlyingLastPx",
	"652" => "UnderlyingLastQty",
	"653" => "SecDefStatus",
	"654" => "LegRefID",
	"655" => "ContraLegRefID",
	"656" => "SettlCurrBidFxRate",
	"657" => "SettlCurrOfferFxRate",
	"658" => "QuoteRequestRejectReason",
	"659" => "SideComplianceID",
);
my %subtags = (
	"MsgType" => {
		"0" => "Heartbeat",
		"1" => "Test Request",
		"2" => "Resend Request",
		"3" => "Reject",
		"4" => "Sequence Reset",
		"5" => "Logout",
		"6" => "Indication of Interest",
		"7" => "Advertisement",
		"8" => "Execution Report",
		"9" => "Order Cancel Reject",
		"A" => "Logon",
		"B" => "News",
		"C" => "Email",
		"D" => "Order - Single",
		"E" => "Order - List",
		"F" => "Order Cancel Request",
		"G" => "Order Cancel - Replace Request",
		"H" => "Order Status Request",
		"J" => "Allocation",
		"K" => "List Cancel Request",
		"L" => "List Execute",
		"M" => "List Status Request",
		"N" => "List Status",
		"P" => "Allocation ACK",
		"Q" => "Don't Know Trade (DK)",
		"R" => "Quote Request",
		"S" => "Quote",
		"T" => "Settlement Instructions",
		"V" => "Market Data Request",
		"W" => "Market Data-Snapshot - Full Refresh",
		"X" => "Market Data-Incremental Refresh",
		"Y" => "Market Data Request Reject",
		"Z" => "Quote Cancel",
		"a" => "Quote Status Request",
		"b" => "Mass Quote Acknowledgement",
		"c" => "Security Definition Request",
		"d" => "Security Definition",
		"e" => "Security Status Request",
		"f" => "Security Status",
		"g" => "Trading Session Status Request",
		"h" => "Trading Session Status",
		"i" => "Mass Quote",
		"j" => "Business Message Reject",
		"k" => "Bid Request",
		"l" => "Bid Response (lowercase L)",
		"m" => "List Strike Price",
		"n" => "XML message (e.g. non-FIX MsgType)",
		"o" => "Registration Instructions",
		"p" => "Registration Instructions Response",
		"q" => "Order Mass Cancel Request",
		"r" => "Order Mass Cancel Report",
		"s" => "New Order - Cross",
		"t" => "Cross Order Cancel - Replace Request (a.k.a. Cross Order Modification Request)",
		"u" => "Cross Order Cancel Request",
		"v" => "Security Type Request",
		"w" => "Security Types",
		"x" => "Security List Request",
		"y" => "Security List",
		"z" => "Derivative Security List Request",
		"AA" => "Derivative Security List",
		"AB" => "New Order - Multileg",
		"AC" => "Multileg Order Cancel - Replace (a.k.a. Multileg Order Modification Request)",
		"AD" => "Trade Capture Report Request",
		"AE" => "Trade Capture Report",
		"AF" => "Order Mass Status Request",
		"AG" => "Quote Request Reject",
		"AH" => "RFQ Request",
		"AI" => "Quote Status Report",
	},
	"OrdType" => {
		"1" => "Market",
		"2" => "Limit",
		"3" => "Stop",
		"4" => "Stop limit",
		"5" => "Market on close (No longer used)",
		"6" => "With or without",
		"7" => "Limit or better (Deprecated)",
		"8" => "Limit with or without",
		"9" => "On basis",
		"A" => "On close (No longer used)",
		"B" => "Limit on close (No longer used)",
		"C" => "Forex - Market (No longer used)",
		"D" => "Previously quoted",
		"E" => "Previously indicated",
		"F" => "Forex - Limit (No longer used)",
		"G" => "Forex - Swap",
		"H" => "Forex - Previously Quoted (No longer used)",
		"I" => "Funari (Limit Day Order with unexecuted portion handled as Market On Close. E.g. Japan)",
		"J" => "Market If Touched (MIT)",
		"K" => "Market with Leftover as Limit (market order then unexecuted quantity becomes limit order at last price)",
		"L" => "Previous Fund Valuation Point (Historic pricing) (for CIV)",
		"M" => "Next Fund Valuation Point -(Forward pricing) (for CIV)",
		"P" => "Pegged",
	},
	"OrdStatus" => {
		"0" => "New",
		"1" => "Partially filled",
		"2" => "Filled",
		"3" => "Done for day",
		"4" => "Canceled",
		"5" => "Replaced (Removed/Replaced)",
		"6" => "Pending Cancel (e.g. result of Order Cancel Request <F>)",
		"7" => "Stopped",
		"8" => "Rejected",
		"9" => "Suspended",
		"A" => "Pending New",
		"B" => "Calculated",
		"C" => "Expired",
		"D" => "Accepted for bidding",
		"E" => "Pending Replace (e.g. result of Order Cancel/Replace Request <G>) ",
	},
	"Side" => {
		"1" => "Buy",
		"2" => "Sell",
		"3" => "Buy minus",
		"4" => "Sell plus",
		"5" => "Sell short",
		"6" => "Sell short exempt",
		"7" => "Undisclosed (valid for IOI <6> and List Order messages only)",
		"8" => "Cross (orders where counterparty is an exchange, valid for all messages except IOIs)",
		"9" => "Cross short",
		"A" => "Cross short exempt",
		"B" => "\"As Defined\" (for use with multileg instruments)",
		"C" => "\"Opposite\" (for use with multileg instruments)",
		"D" => "Subscribe (e.g. CIV)",
		"E" => "Redeem (e.g. CIV)",
		"F" => "Lend (FINANCING - identifies direction of collateral)",
		"G" => "Borrow (FINANCING - identifies direction of collateral)",
	},
	"HandlInst" => {
		"1" => "Automated execution order, private, no Broker intervention",
		"2" => "Automated execution order, public, Broker intervention OK",
		"3" => "Manual order, best execution",
	},
	"ExecInst" => {
		"1" => "Not held",
		"2" => "Work",
		"3" => "Go along",
		"4" => "Over the day",
		"5" => "Held",
		"6" => "Participate don't initiate",
		"7" => "Strict scale",
		"8" => "Try to scale",
		"9" => "Stay on bidside",
		"0" => "Stay on offerside",
		"A" => "No cross (cross is forbidden)",
		"B" => "OK to cross",
		"C" => "Call first",
		"D" => "Percent of volume \"(indicates that the sender does not want to be all of the volume on the floor vs. a specific percentage\"",
		"E" => "Do not increase - DNI",
		"F" => "Do not reduce - DNR",
		"G" => "All or none - AON",
		"H" => "Reinstate on System Failure (mutually exclusive with Q)",
		"I" => "Institutions only",
		"J" => "Reinstate on Trading Halt (mutually exclusive with K)",
		"K" => "Cancel on Trading Halt (mutually exclusive with L)",
		"L" => "Last peg (last sale)",
		"M" => "Mid-price peg (midprice of inside quote)",
		"N" => "Non-negotiable",
		"O" => "Opening peg",
		"P" => "Market peg",
		"Q" => "Cancel on System Failure (mutually exclusive with H)",
		"R" => "Primary peg (primary market - buy at bid/sell at offer)",
		"S" => "Suspend",
		"T" => "Fixed Peg to Local best bid or offer at time of orderU => Customer Display Instruction (RuleAc-/4)",
		"V" => "Netting (for Forex)",
		"W" => "Peg to VWAP",
		"X" => "Trade Along",
		"Y" => "Try to Stop",
		"Z" => "Cancel if Not Best",
		"a" => "Trailing Stop Peg",
		"b" => "Strict Limit (No Price <44> Improvement)",
		"c" => "Ignore Price <44> Validity Checks",
		"d" => "Peg to Limit Price <44>",
		"e" => "Work to Target Strategy",
	},
	"ExecTransType" => {
		"0" => "New",
		"1" => "Cancel",
		"2" => "Correct",
		"3" => "Status",
	},
	"EncryptMethod" => {
		"0" => "None / other",
		"1" => "PKCS (proprietary)",
		"2" => "DES (ECB mode)",
		"3" => "PKCS/DES (proprietary)",
		"4" => "PGP/DES (defunct)",
		"5" => "PGP/DES-MD5 (see app note on FIX web site)",
		"6" => "PEM/DES-MD5 (see app note on FIX web site)",
	},
	"CxlRejReason" => {
		"0" => "Too late to cancel",
		"1" => "Unknown order",
		"2" => "Broker / Exchange Option",
		"3" => "Order already in Pending Cancel or Pending Replace status",
		"4" => "Unable to process Order Mass Cancel Request <q>",
		"5" => "OrigOrdModTime <586> (586) did not match last TransactTime <60> (60) of order",
		"6" => "Duplicate ClOrdID <11> () received",
		"99" => "Other",
	},
	"CxlRejResponseTo" => {
		"1" => "Order Cancel Request <F>",
		"2" => "Order Cancel/Replace Request <G>",
	},
);
#
sub usage {
	print "usage: fp [-?] [fixlogfile [...]]\n"
}
#
sub parsefile {
	my ($infd) = @_;
	#
	while (defined($rec = <$infd>)) {
		chomp($rec);
		#
		my @fields = split //, $rec;
		my $firstrec = shift @fields;
		$firstrec =~ m/^(\S+)\s(\S+)\s(\S+)\s\S+\s\S+\s(.+)/;
		#
		my $dir = $1;
		my $date = $2;
		my $day = $3;
		my $rest = $4;
		unshift(@fields, $rest);
		#
		if ($dir eq 'R') {
			print "\n<<<<==== Receiving <<<<====\n";
		} elsif ($dir eq 'S') {
			print "\n====>>>> Sending ====>>>>\n";
		} else {
			print "\n======== Other ========\n";
			print "$rec\n";
			next;
		}
		print "Log File Date = $date $day\n";
		#
		foreach $field (@fields) {
			my ($tagid, $tagval) = split /=/, $field, 2;
			if (defined($tagid) && defined($tagval)) {
				if (exists($tags{$tagid})) {
					my $tagname = $tags{$tagid};
					print "$tagname <$tagid> = ";
					if (exists($subtags{$tagname}->{$tagval})) {
						print "$subtags{$tagname}->{$tagval} ";
					}
					print "<$tagval>\n";
				} else {
					print "<TAGID-$tagid> = <TAGVAL-$tagval>\n";
				}
			} elsif (defined($tagid)) {
				if (exists($tags{$tagid})) {
					print "$tags{$tagid} <$tagid> = ";
				} else {
					print "<TAGID-$tagid> = ";
				}
				print "<TAGVAL-UNKNOWN>\n";
			} elsif (defined($tagval)) {
				print "<TAGID-UNKNOWN> = <$tagval>\n";
			}
		}
	}
}
#
if ($#ARGV < 0) {
	parsefile(\*STDIN);
} elsif ($ARGV[0] eq '-?') {
	usage();
} else {
	foreach my $fixlogfile (@ARGV) {
		open(INFD, "<".$fixlogfile) or 
			die "can't open $fixlogfile: $!";
		parsefile(\*INFD);
		close(INFD);
	}
}
#
exit 0;


